// Baixe o conte√∫do de: https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js
// E cole aqui, OU use a vers√£o simplificada abaixo:

// VERS√ÉO SIMPLIFICADA - Substitua por uma biblioteca PDF alternativa
(function() {
    'use strict';
    
    // Implementa√ß√£o b√°sica de PDF usando canvas e download
    class SimplePDF {
        constructor() {
            this.content = [];
            this.pageHeight = 297; // A4 em mm
            this.pageWidth = 210;
            this.margin = 20;
            this.fontSize = 12;
            this.lineHeight = 6;
            this.currentY = this.margin;
            this.pages = [[]];
            this.currentPage = 0;
        }
        
        setFontSize(size) {
            this.fontSize = size;
        }
        
        setFont(family, style) {
            // Implementa√ß√£o b√°sica
        }
        
        text(text, x, y) {
            this.pages[this.currentPage].push({
                type: 'text',
                text: text,
                x: x,
                y: y,
                fontSize: this.fontSize
            });
        }
        
        addPage() {
            this.currentPage++;
            this.pages.push([]);
            this.currentY = this.margin;
        }
        
        getTextWidth(text) {
            // Estimativa b√°sica
            return text.length * (this.fontSize * 0.6);
        }
        
        splitTextToSize(text, maxWidth) {
            const words = text.split(' ');
            const lines = [];
            let currentLine = '';
            
            for (const word of words) {
                const testLine = currentLine + (currentLine ? ' ' : '') + word;
                if (this.getTextWidth(testLine) <= maxWidth) {
                    currentLine = testLine;
                } else {
                    if (currentLine) lines.push(currentLine);
                    currentLine = word;
                }
            }
            if (currentLine) lines.push(currentLine);
            
            return lines;
        }
        
        internal = {
            pageSize: {
                getWidth: () => this.pageWidth,
                getHeight: () => this.pageHeight
            },
            getNumberOfPages: () => this.pages.length
        };
        
        setPage(pageNum) {
            this.currentPage = pageNum - 1;
        }
        
        save(filename) {
            // Converter para texto simples e fazer download
            let content = '';
            
            this.pages.forEach((page, pageIndex) => {
                content += `\n=== P√ÅGINA ${pageIndex + 1} ===\n\n`;
                
                page.forEach(item => {
                    if (item.type === 'text') {
                        content += item.text + '\n';
                    }
                });
            });
            
            // Criar e baixar arquivo
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename.replace('.pdf', '.txt');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            console.log(`üìÑ Arquivo salvo como: ${filename.replace('.pdf', '.txt')}`);
        }
    }
    
    // Expor como jsPDF
    window.jsPDF = SimplePDF;
    
    console.log('‚úÖ PDF Simples carregado como fallback');
})();